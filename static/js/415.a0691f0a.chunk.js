"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[415],{4415:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var t=r(2791),a=r(5048),i=r(7827),o=r(8096),s=r(6895),c=r(184);function u(){var e=(0,a.I0)(),n=(0,t.useCallback)((function(n){var r=n.currentTarget.value;e((0,s.sP)(r.toLowerCase()))}),[e]);return(0,c.jsx)(o.Z,{sx:{minWidth:"350px",maxWidth:"500px",gap:"10px",margin:"0 auto"},children:(0,c.jsx)(i.Z,{id:"outlined-basic",label:"Filter",variant:"outlined",type:"search",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",onChange:n})})}var l=t.memo(u),d=r(1582),m=r(493),h=r(4165),x=r(5861),p=r(9439),f=r(4852),Z=r(3400),b=r(653),j=r(3044),v=r(7),g=r(6259),y=r(7247),k=r(5504),w=r(4017),C=function(e){var n=e.name,r=e.id,t=e.phone,a=(0,w.Nt)(),i=(0,p.Z)(a,1)[0],o=function(){var e=(0,x.Z)((0,h.Z)().mark((function e(n){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(f.ZP,{secondaryAction:(0,c.jsx)(Z.Z,{edge:"end","aria-label":"delete",onClick:function(){return o(r)},color:"error",children:(0,c.jsx)(y.Z,{})}),children:[(0,c.jsx)(b.Z,{children:(0,c.jsx)(j.Z,{size:"small",sx:{bgcolor:v.Z[500]},children:(0,c.jsx)(k.Z,{})})}),(0,c.jsx)(g.Z,{primary:n,secondary:t})]},r)})},X={boxShadow:1,borderRadius:2,border:"1px solid lightgray",p:2,minWidth:350,maxWidth:500,alignItems:"center",padding:0},T=function(e){var n=e.contacts;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{direction:"column",justifyContent:"flex-start",alignItems:"center",children:(0,c.jsx)(m.Z,{sx:X,"aria-label":"contacts",children:n.map((function(e){var n=e.name,r=e.number,t=e.id;return(0,c.jsx)(C,{name:n,id:t,phone:r},t)}))})})})},W=r(890),_=r(4294),z=r(5705),A=r(6727),F=A.Ry().shape({name:A.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Required"),phone:A.Z_().length(13,"Number must have 13 symbols").trim().matches(/^\+380\d{9}$/,"Phone number must be a valid Ukrainian phone number").required("Required")});function N(){var e=(0,w.Tn)(),n=(0,p.Z)(e,1)[0],r=(0,w.wY)(),t=r.data,a=r.isError,s=function(){var e=(0,x.Z)((0,h.Z)().mark((function e(r,i){var o,s,c;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.name,s=r.phone,a||!t){e.next=11;break}if(!t.some((function(e){return e.name===o||e.number===s}))){e.next=7;break}alert('Contact with name "'.concat(o,'" or number "').concat(s,'" already exists!')),e.next=11;break;case 7:return c={name:o,number:s},e.next=10,n(c).unwrap();case 10:i();case 11:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();return(0,c.jsx)(z.J9,{initialValues:{name:"",phone:""},onSubmit:function(e,n){var r=n.resetForm;return s(e,r)},validationSchema:F,children:function(e){var n=e.errors,r=e.touched;return(0,c.jsx)(z.l0,{children:(0,c.jsxs)(o.Z,{noValidate:!0,autoComplete:"off",sx:{minWidth:"350px",maxWidth:"500px",gap:"10px",margin:"0 auto"},children:[(0,c.jsx)(z.gN,{as:i.Z,id:"outlined-search",label:"Full Name",name:"name",type:"text",error:r.name&&!!n.name,helperText:r.name&&n.name}),(0,c.jsx)(z.gN,{as:i.Z,id:"outlined-search",label:"Phone",name:"phone",type:"tel",error:r.phone&&!!n.phone,helperText:r.phone&&n.phone}),(0,c.jsx)(W.Z,{variant:"caption",color:"text.secondary",children:"Phone number must be a valid Ukrainian phone number (+380XXXXXXXXX)"}),(0,c.jsx)(_.Z,{variant:"contained",size:"small",type:"submit",children:"Add contact"})]})})}})}var P=r(4554),q=r(3239),L=t.memo((function(){var e=(0,w.wY)(),n=e.data,r=void 0===n?[]:n,i=e.error,o=e.isLoading,s=(0,a.v9)((function(e){return e.filter})),u=(0,t.useMemo)((function(){return function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}(r,s)}),[r,s]);return(0,c.jsxs)("div",{children:[(0,c.jsx)(N,{}),o&&!i&&(0,c.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,c.jsx)(q.Z,{})}),!o&&i&&(0,c.jsx)("div",{children:"Error"}),!o&&(u.length>1||""!==s?(0,c.jsx)(l,{}):null),!o&&u.length>0&&(0,c.jsx)(T,{contacts:u})]})}))}}]);
//# sourceMappingURL=415.a0691f0a.chunk.js.map